# 도커(Docker)란?

도커(Docker)는 애플리케이션과 그 <span style="color:orange">애플리케이션을 실행하는데 필요한 모든 것</span>을 하나의 패키지로 묶어 일관되게 실행할 수 있는 <span style="color:red">가상화 플랫폼</span>이다.

<details>
<summary><h3 style="color: orange">애플리케이션을 실행하는데 필요한 모든 것?</h3></summary>
애플리케이션을 소스 코드라고 하면 그것만으로는 애플리케이션을 실행할 수 없다.

애플리케이션을 실행하려면 다음과 같은 다양한 구성 요소들이 필요하다.

- **운영체제**
    - 애플리케이션은 특정 OS에서 실행되도록 설계된다.
    - 따라서 애플리케이션은 그 실행 환경과 호환되는 운영체제가 필요하다.


- **라이브러리와 의존성**
    - 애플리케이션은 특정 라이브러리나 패키지에 의존할 수 있다. 예를 들어 Python 애플리케이션이 numpy 라이브러리를 필요로 하는 것이 있다.
    - 애플리케이션이 특정 버전의 라이브러리를 필요로 할 수 있고, OS에 따라 이러한 라이브러리 설치 방법도 다를 수 있다.
    - 라이브러리와 의존성을 잘못 설정하면 애플리케이션이 실행되지 않거나 예상치 못한 오류가 발생할 수 있다.


- **환경변수**
    - DB 연결정보나 API 키, 프로필(live, dev, staging) 같은 변수들이 잘 설정되어야 애플리케이션이 올바르게 동작한다.


- 등등…


  즉, 애플리케이션이 정상적으로 돌아가기 위해서는 여러 구성 요소들이 잘 맞물려야하고, 따라서 이러한 구성요소들을 하나로 묶어 패키징할 필요가 있는 것이다.

  → 이러한 이유로 도커는 애플리케이션과 더불어 이를 실행하기 위한 구성 요소들을 같이 다루는 것이다.
</details>

<details>
<summary><h3 style="color: red">가상화 플랫폼?</h3></summary>

### 일단 가상화가 무엇인지 알아보자.

- 가상화(Virtualization)는 실제 물리적인 하드웨어 자원을 논리적으로 나누어 여러 개의 독립적인 환경으로 나누는 기술이다.
- 쉽게 말하면 하나의 컴퓨터(서버)에서 여러 개의 OS나 애플리케이션을 동시에 실행할 수 있도록  나누는 것이다.

### 가상화의 핵심 개념

**1. 호스트 (Host)**

- 실제 물리 컴퓨터나 서버를 의미한다.
- 하드웨어 자원(CPU, 메모리, 디스크 등)을 제공하는 주체이다.

**2. 게스트 (Guest)**

- 가상화 기술을 통해 생성된 가상의 시스템이다.
- 게스트는 실제 컴퓨터처럼 동작하지만, 실제로는 물리적 자원을 호스트에게 분배받아 사용한다.
- e.g.) VM(Virtual Machine), 컨테이너 등이 게스트이다.

**3. 하이퍼바이저 (Hypervisor)**

- 하이퍼바이저는 가상 환경을 관리하고, 호스트의 하드웨어 자원을 게스트에 할당해주는 소프트웨어 레이어이다.
- e.g.) VMWare, KVM, Hyper-V와 같은 하이퍼바이저가 호스트와 게스트 간의 자원 할당 및 관리를 담당한다.

## 가상화의 종류

### 1. 하드웨어 가상화 (Virtual Machines, VM)

- VM은 물리적 서버(호스트)에서 여러 개의 OS(게스트 OS)를 독립적으로 실행할 수 있게 해준다.
- 각 VM은 자체적인 OS, 파일 시스템, 애플리케이션을 갖춘 독립적인 환경으로, 마치 별도의 물리적 컴퓨터처럼 동작한다.

**장점**

- 완벽한 격리성 : 각 가상 머신은 독립적으로 실행되며, 다른 VM과 완전히 격리된 상태
- 다양한 운영체제 : 하나의 호스트에서 Linux, Window 같은 서로 다른 OS 실행 가능

**단점**

- 높은 리소스 소비 : 각 VM은 자체적인 OS를 포함하고 있어 메모리와 CPU 사용량이 크다.
- 느린 시작 시간 : VM은 운영체제 부팅이 필요하여 시작속도가 느리다.

### 2. 컨테이너 가상화 (Container Virtualization)

- 컨테이너 가상화는 애플리케이션과 그 애플리케이션을 실행하는데 필요한 라이브러리, 설정 등을 하나의 패키지로 묶어서 가상환경에서 실행할 수 있는 기술이다.
- 각 컨테이너는 호스트의 OS 커널을 공유하고, 격리된 파일 시스템, 네트워크, 프로세스를 갖추어 동작한다.
- VM과 달리 컨테이너는 별도의 OS를 포함하지 않기 때문에 훨씬 가볍고 빠르다.

**장점**

- 가볍고 빠름 : VM에 비해 메모리 사용량이 적고, 시작 속도가 매우 빠르다.
- 호스트 자원 효율성 : OS를 공유하기 때문에 자원 소모가 적다.
- 일관된 실행 환경 : 컨테이너를 통해 개발 환경과 배포 환경이 동일하므로, 환경 차이로 인한 문제를 줄여준다.

**단점**

- 커널 공유 : 컨테이너는 호스트의 커널을 공유하기 때문에 완벽한 격리성은 제공하지 않는다.
- 제한된 운영체제 : 호스트와 다른 커널을 가진 OS는 사용할 수 없다. 예를들어 Linux 호스트에서는 Linux 기반 컨테이너만 사용할 수 있다.

→ 결론 : 하드웨어 가상화와 컨테이너 가상화는 자체적인 OS를 쓰냐, 아니냐에 따라 무겁고 가벼운 정도의 차이가 있다.

## 그럼 가상화 플랫폼은 뭐냐

위에서 설명한 가상화 기술을 사용할 수 있도록 지원하는 소프트웨어이다. 도커 역시 가상화 플랫폼의 일종으로, 컨테이너 기반 가상화를 제공한다. 예를 들어 VMWare, Hyper-V, Docker 등이 있다.

### 가상화 플랫폼의 기능

**1. 자원 분배 및 관리**
- 호스트 하드웨어 자원을 여러 가상 환경에 효율적으로 분배하고, 각 환경이 독립적으로 동작할 수 있도록 관리한다.

**2. 격리 및 보안**
- 각 가상환경을 격리하여 애플리케이션 간에 간섭이 없도록 만들어준다.
- 이를 통해 하나의 가상환경에서 문제가 발생해도 다른 환경에 영향을 주지 않도록 해준다.

**3. 배포 및 확장**
- 가상화 플랫폼은 애플리케이션의 배포를 간편하게 하고, 필요에 따라서 자원을 동적으로 확장할 수 있도록 한다.
- 예를 들어, 도커 컨테이너를 이용해 MSA를 구현할 수 있다.


**4. 일관된 환경 제공**
- 애플리케이션 개발, 테스트, 배포 환경을 동일하게 유지할 수 있다.
- 예를 들어, 도커 이미지를 통해 OS, 의존성, 라이브러리 등을 하나로 패키징하여 일관된 환경을 제공한다.
</details>
